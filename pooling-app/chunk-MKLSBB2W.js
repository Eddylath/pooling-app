import{a as k,b as s,c as R,d as w,f as D,g as O,h as B,i as P,j as L,k as q,l as H,m as j,o as Z}from"./chunk-K7O3RT3H.js";import{f as G,g as M,h as A}from"./chunk-HA7Q2T4A.js";import{Aa as y,Fa as a,Ha as E,Ia as N,Ja as I,Ka as n,La as i,Ma as p,Na as b,Oa as x,Pa as f,Qa as S,Ra as l,Sa as T,W as g,X as C,Xa as u,Ya as V,na as m,sa as _,wa as h}from"./chunk-KWSPVR2Z.js";function $(t){return r=>{let e=r.get(t);e?.value&&(e.value.length!==6||isNaN(Number(e.value))?e.setErrors({InvalidEmployeeId:!0}):e?.setErrors(null))}}function Y(t){return r=>{let e=r.get(t);e?.value&&(e.value.match("^[A-Z]{2}[-][0-9]{2}[-][A-Z]{2}[-][0-9]{4}$")?e.setErrors(null):e.setErrors({InvalidVehicalNumber:!0}))}}function z(t){return r=>{let e=r.get(t),d=new Date,o=d.getMinutes(),F=d.getHours();if(e?.value){let v=e.value.split(":");v[0]>F?e.setErrors(null):v[0]==F?v[1]>o?e.setErrors(null):e.setErrors({InvalidTime:!0}):e.setErrors({InvalidTime:!0})}}}function J(t,r){return e=>{let d=e.controls[t],o=e.controls[r];d.value&&o.value&&(d.value===o.value?o.setErrors({SamePickupDrop:!0}):o.setErrors(null))}}var c=t=>({error:t});function Q(t,r){if(t&1&&(n(0,"option",8),l(1),i()),t&2){let e=r.$implicit;a("value",e),m(),T(e)}}function U(t,r){if(t&1){let e=b();n(0,"form",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"label"),l(5,"Employee ID"),i(),p(6,"input",6),i(),n(7,"div",5)(8,"label"),l(9,"Vehicle type"),i(),n(10,"select",7),N(11,Q,2,2,"option",8,E),i()(),n(13,"div",5)(14,"label"),l(15,"Vehicle number"),i(),p(16,"input",9),i(),n(17,"div",5)(18,"label"),l(19,"Seats available"),i(),p(20,"input",10),i()(),n(21,"div",4)(22,"div",5)(23,"label"),l(24,"Ride time"),i(),p(25,"input",11),i(),n(26,"div",5)(27,"label"),l(28,"Pickup location"),i(),p(29,"input",12),i(),n(30,"div",5)(31,"label"),l(32,"Drop location"),i(),p(33,"input",13),i()()(),n(34,"div",14)(35,"button",15),x("click",function(){g(e);let o=f();return C(o.onSubmit())}),l(36,"Add ride"),i()()()}if(t&2){let e=f();a("formGroup",e.addRideForm),m(6),a("ngClass",u(8,c,e.isFieldInvalid("empId"))),m(5),I(e.vehicleTypes),m(5),a("ngClass",u(10,c,e.isFieldInvalid("vehicleNumber"))),m(4),a("ngClass",u(12,c,e.isFieldInvalid("seatsAvailable"))),m(5),a("ngClass",u(14,c,e.isFieldInvalid("rideTime"))),m(4),a("ngClass",u(16,c,e.isFieldInvalid("dropLocation"))),m(4),a("ngClass",u(18,c,e.isFieldInvalid("dropLocation"))),m(2),a("disabled",e.isSubmitDisabled())}}function W(t,r){if(t&1){let e=b();n(0,"div",4)(1,"h1"),l(2,"Your message have been saved"),i(),n(3,"button",16),x("click",function(){g(e);let o=f();return C(o.addMore())}),l(4,"Add more"),i()()}}var K=class t{constructor(r){this.fb=r;this.initiateForm()}addRideForm;formOpen=!0;vehicleTypes=["Car","Bike","Scooter","Bicycle","Bus","Truck"];initiateForm(){this.addRideForm=this.fb.group({empId:["",[s.required]],vehicleType:[this.vehicleTypes[0]],vehicleNumber:["",s.required],seatsAvailable:[1,[s.required,s.min(1)]],rideTime:["",s.required],pickupLocation:["",s.required],dropLocation:["",s.required]},{validator:[$("empId"),Y("vehicleNumber"),z("rideTime"),J("pickupLocation","dropLocation")]})}isSubmitDisabled(){return this.addRideForm.invalid}isFieldInvalid(r){return this.addRideForm.get(r)?.touched&&this.addRideForm.get(r)?.errors}onSubmit(){this.formOpen=!1}addMore(){this.formOpen=!0,this.initiateForm()}static \u0275fac=function(e){return new(e||t)(_(j))};static \u0275cmp=h({type:t,selectors:[["app-add-ride"]],decls:3,vars:2,consts:[["saveMessage",""],[3,"formGroup",4,"ngIf","ngIfElse"],[3,"formGroup"],[1,"flex"],[1,"flex","f-column","flex-x-center"],[1,"input-wrapper","flex","flex-gap-1"],["type","text","formControlName","empId",3,"ngClass"],["formControlName","vehicleType"],[3,"value"],["type","text","formControlName","vehicleNumber","placeholder","MH-01-BH-0001",3,"ngClass"],["type","number","formControlName","seatsAvailable",3,"ngClass"],["type","time","formControlName","rideTime",3,"ngClass"],["type","text","formControlName","pickupLocation","placeholder","Office/Bellandur etc",3,"ngClass"],["type","text","formControlName","dropLocation","placeholder","Office/Bellandur etc",3,"ngClass"],[1,"flex","button-wrapper"],[1,"primary-button",3,"click","disabled"],[1,"primary-button",3,"click"]],template:function(e,d){if(e&1&&y(0,U,37,20,"form",1)(1,W,5,0,"ng-template",null,0,V),e&2){let o=S(2);a("ngIf",d.formOpen)("ngIfElse",o)}},dependencies:[Z,D,q,H,k,O,L,R,w,B,P,A,G,M],styles:[".input-wrapper[_ngcontent-%COMP%]{align-items:baseline}label[_ngcontent-%COMP%]{flex:1;text-align:end}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{flex:1}.button-wrapper[_ngcontent-%COMP%]{justify-content:center;margin:2rem}"]})};export{K as AddRideComponent};
